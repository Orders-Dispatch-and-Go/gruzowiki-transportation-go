Я бы добавил подтверждение почты при регистрации, чтобы восстановить парль мог только верифицированный пользователь.

```sql
ALTER TABLE users ADD COLUMN verified BOOLEAN NOT NULL DEFAULT FALSE;
```

**Добавил бы следующие эндпоинты:**
1. POST /verify-email          # Подтверждение по токену из email
2. POST /resend-verification   # Повторная отправка письма

**Порядок регистрации:**
1. Пользователь регистрируется → verified = false
2. Генерируется токен подтверждения (JWT, 24 часа)
3. Отправляется email с ссылкой https://.../verify-email?token=xyz
4. После подтверждения → verified = true
5. Если токен истёк, то пользователь может на фронте тыкнуть подтвердить почту, и тогда фронт вызывает /resend-verification, и всё начинается со 2 пункта.

# Восстановление пароля
```sql
CREATE TABLE password_reset_tokens (
    id BIGSERIAL PRIMARY KEY,
    user_id BIGINT NOT NULL REFERENCES users ON DELETE CASCADE,
    token_hash VARCHAR NOT NULL UNIQUE,
    expires_at TIMESTAMPTZ NOT NULL,
    used BOOLEAN NOT NULL DEFAULT FALSE,
    created_at TIMESTAMPTZ DEFAULT NOW()
);
```

**Добавил бы следующие эндпоинты:**
1. POST /forgot-password # Запрос на сброс (только для verified=true)
2. POST /reset-password # Установка нового пароля по токену

**Порядок восстановления пароля:**
1. Пользователь вводит email (проверка что verified = true)
2. Генерируется токен сброса (JWT, 1 час)
3. Отпрвляется токен на почту пользователю.
4. Пользователь берёт токен, вводит его вместе с новым паролем на фронте, и фронт отправляет /reset-password запрос на бэк.